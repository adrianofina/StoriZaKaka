{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discover - Stori za Kaka</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/discover.css' %}">
</head>
<body>
  <div class="container">
    <!-- Header Section -->
    <div class="header">
      <a href="/" class="logo-link">
        <img src="{% static 'logo.kakaflix.jpg' %}" alt="Stori za Kaka" class="site-logo" style="height:48px;display:block;margin:0 auto;">
      </a>
      <button class="back-button" onclick="goHome()">
        <i class="fas fa-arrow-left"></i>
        <span>Home</span>
      </button>
      <h1>Discover</h1>
      <p>Browse trending content and get personalized recommendations based on your mood</p>
    </div>

    <!-- Mood Selector -->
    <div class="mood-selector">
      <h2><i class="fas fa-heart"></i> Select Your Moods</h2>
      <div class="mood-grid">
        <div class="mood-option" data-mood="comedy">
          <i class="mood-icon fas fa-laugh-beam"></i>
          <div class="mood-name">Happy</div>
          <div class="mood-description">Feel-good comedies</div>
        </div>
        <div class="mood-option" data-mood="drama">
          <i class="mood-icon fas fa-sad-tear"></i>
          <div class="mood-name">Emotional</div>
          <div class="mood-description">Deep dramas</div>
        </div>
        <div class="mood-option" data-mood="action">
          <i class="mood-icon fas fa-bolt"></i>
          <div class="mood-name">Excited</div>
          <div class="mood-description">Action-packed</div>
        </div>
        <div class="mood-option" data-mood="romance">
          <i class="mood-icon fas fa-heart"></i>
          <div class="mood-name">Romantic</div>
          <div class="mood-description">Love stories</div>
        </div>
        <div class="mood-option" data-mood="adventure">
          <i class="mood-icon fas fa-mountain"></i>
          <div class="mood-name">Adventurous</div>
          <div class="mood-description">Epic journeys</div>
        </div>
        <div class="mood-option" data-mood="thriller">
          <i class="mood-icon fas fa-brain"></i>
          <div class="mood-name">Thoughtful</div>
          <div class="mood-description">Mind-bending</div>
        </div>
        <div class="mood-option" data-mood="family">
          <i class="mood-icon fas fa-history"></i>
          <div class="mood-name">Nostalgic</div>
          <div class="mood-description">Family classics</div>
        </div>
        <div class="mood-option" data-mood="horror">
          <i class="mood-icon fas fa-ghost"></i>
          <div class="mood-name">Thrilled</div>
          <div class="mood-description">Horror & suspense</div>
        </div>
      </div>
      <button class="get-recommendations" id="getRecommendations" disabled>
        <i class="fas fa-magic"></i> Get My Recommendations
      </button>
    </div>

    <!-- Explore Selector (always visible) -->
    <section class="genre-selector-section">
      <div class="explore-selector-grid">
        <div class="explore-selector-item">
          <label for="genreSelect">Genre:</label>
          <select id="genreSelect">
            <option value="">Select a genre...</option>
            <!-- JS will populate the rest -->
          </select>
        </div>
        <div class="explore-selector-item">
          <label for="yearSelect">Year:</label>
          <select id="yearSelect">
            <option value=""> year</option>
            <!-- JS will populate -->
          </select>
        </div>
        <div class="explore-selector-item">
          <label for="languageSelect">Language:</label>
          <select id="languageSelect">
            <option value="">Language</option>
            <!-- JS will populate -->
          </select>
        </div>
        <div class="explore-selector-item">
          <label for="dramaTypeSelect">Drama Type:</label>
          <select id="dramaTypeSelect">
            <option value="">Any</option>
            <option value="kdrama">K-Drama</option>
            <option value="cdrama">C-Drama</option>
            <option value="jdrama">J-Drama</option>
            <option value="thaidrama">Thai Drama</option>
            <option value="turkishdrama">Turkish Drama</option>
            <option value="other">Other</option>
          </select>
        </div>
      </div>
    </section>

    <!-- Curated For You Section (hidden by default, JS will show/hide) -->
    <section class="curated-section" id="curatedSection" style="display: none;">
      <div class="curated-header">
        <h2 class="section-title"><i class="fas fa-star"></i> Curated For You</h2>
        <button class="refresh-btn" id="refreshCurated">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>
      <div class="media-grid" id="curatedGrid">
        <!-- Content will be loaded here -->
      </div>
    </section>

    <!-- Selected Genre Section (hidden by default, JS will show/hide) -->
    <section class="selected-genre-section" id="selectedGenreSection" style="display: none;">
      <h2 id="genreTitle">Genre Movies</h2>
      <div class="movie-row" id="genreMovieRow">
        <!-- Genre-specific movies here -->
      </div>
    </section>

    <!-- Movies Section -->
    <section class="movie-section" id="trending-movies">
      <h2 class="section-title">Trending Movies</h2>
      <div class="movie-row" id="moviesRow1">
        <div class="loading-indicator hidden" id="moviesLoading1">
          <div class="spinner"></div>
        </div>
      </div>
      <div class="movie-row" id="moviesRow2">
        <div class="loading-indicator hidden" id="moviesLoading2">
        <div class="spinner"></div>
        </div>
      </div>
    </section>

    <!-- TV Shows Section -->
    <section class="movie-section" id="trending-tv">
      <h2 class="section-title">Trending TV Shows</h2>
      <div class="movie-row" id="tvRow1">
        <div class="loading-indicator hidden" id="tvLoading1">
          <div class="spinner"></div>
        </div>
      </div>
      <div class="movie-row" id="tvRow2">
        <div class="loading-indicator hidden" id="tvLoading2">
        <div class="spinner"></div>
        </div>
      </div>
    </section>

    <!-- Error State -->
    <div class="error-state hidden">
      <i class="fas fa-exclamation-triangle"></i>
      <p>Failed to load content</p>
      <button class="retry-btn">Retry</button>
    </div>
  </div>

  <script>
    window.TMDB_API_KEY = "{{ TMDB_API_KEY|escapejs }}";
  </script>
  <script src="{% static 'js/discover.js' %}"></script>
</body>
</html>